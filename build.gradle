group 'com.waves.ikb4stream'
version '1.0-SNAPSHOT'

apply plugin: 'java'

sourceCompatibility = 1.8

sourceSets {
    test {
        java {
            srcDirs = ['src/core', 'src/consumer', 'src/producer', 'src/test/']
        }
    }
    consumer {
        java {
            srcDirs = ['src/core', 'src/consumer']
        }
    }
    producer {
        java {
            srcDirs = ['src/core', 'src/producer']
        }
    }
}

task packageConsumerJar(type: Jar, description: 'Package the Consumer Jar') {
    archiveName = "ikb4stream-$version-consumer.jar"
    manifest {
        attributes 'Main-Class': 'com.waves_rsp.ikb4stream.consumer.Main'
    }
    from sourceSets.consumer.output
}

task packageProducerJar(type: Jar, description: 'Package the Producer Jar') {
    archiveName = "ikb4stream-$version-producer.jar"
    manifest {
        attributes 'Main-Class': 'com.waves_rsp.ikb4stream.producer.Main'
    }
    from sourceSets.producer.output
}

task testAll(type: Test) {
    testClassesDir = sourceSets.test.output.classesDir
    classpath = sourceSets.test.runtimeClasspath
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.mongodb:mongodb-driver-async:3.2.2'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.8.6'
    testCompile 'junit:junit:4.11'
}